10 REM THIS IS A TEST OF TRSNIC CONNECTING TO AN INTERNET TIME SERVICE12 GOSUB 100015 REM OPEN A TCP/IP SOCKET20 OUT 236,16  	:REM ENABLE MODEL III BUS30 OUT 31,20		:REM TCP/IP35 OUT 31,1		:REM SOCKET COMMAND40 OUT 31,1		:REM USE IPV450 OUT 31,1		:REM USE TCP55 OUT 31,0		:REM VERSION 057 GOSUB 200060 Y=INP(31)	:REM GET THE STATUS70 IF Y <> 0 THEN PRINT "ERROR OPENING SOCKET": GOTO 50080 SOCKFD=INP(31)	:REM STORE THE SOCKET FILE DESCRIPTOR90 PRINT "THE SOCKET IS OPEN "100 REM CONNECT TO THE SERVER105 OUT 31,20	:REM TCP/IP110 OUT 31,2	:REM CONNECT COMMAND115 OUT 31,SOCKFD116 OUT 31,1	:REM USE HOSTNAME117 L = LEN(H$)118 FOR T = 1 TO L119 T$ = MID$(H$,T,1)120 OUT 31,ASC(T$)121 NEXT T122 OUT 31,0	:REM NULL ENDS HOSTNAME123 OUT 31,0	:REM PORT MSB124 OUT 31,P	:REM PORT LSB126 GOSUB 2000130 Y = INP(31)140 IF Y <> 0 THEN PRINT "ERROR CONNECTING TO NIST SERVER": GOTO 500150 PRINT "YOU ARE CONNECTED TO NIST SERVER"190 PRINT "RECEIVING DATA FROM NIST..."200 REM RECEIVE THE DATA201 OUT 31,20	:REM TCP/IP202 OUT 31,5	:REM RECV204 OUT 31,SOCKFD206 OUT 31,0	:REM USE BLOCKING FOR NIST DAYTIME SERVICE208 OUT 31,0:OUT 31,0:OUT 31,0:OUT 31,200		:REM DATA LENGTH REQUESTED210 GOSUB 2000220 Y = INP(31)230 IF Y <> 0 THEN PRINT "ERROR RECEIVING": GOTO 500240 L1 = INP(31):L2 = INP(31):L3 = INP(31):L4 = INP(31)250 L = (L3 * 256) + L4260 FOR T = 1 TO L: Y=INP(31): PRINT CHR$(Y);:NEXT T300 PRINT 310 PRINT "...DONE RECEIVING DATA FROM NIST"500 REM CLOSE505 OUT 31,20	:REM TCP/IP510 OUT 31,7	:REM CLOSE520 OUT 31,SOCKFD525 GOSUB 2000530 Y = INP(31)540 IF Y = 0 THEN PRINT "THE SOCKET IS CLOSED" ELSE PRINT "ERROR ON CLOSE"550 END1000 REM NIST DAYTIME SERVICE IP ADDRESS AND PORT1010 H$ = "utcnist.colorado.edu"1020 P = 131030 RETURN2000 REM WAIT FOR BUS INTERRUPT2005 Y = INP(112)2010 IF Y AND 8 THEN GOTO 20052020 RETURN